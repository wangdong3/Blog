# restful标准

## 一、接口设计原则

1. 使用http的方法：`post delete put get `来代表资源的增删改查，并且使用http状态码来代表不同的结果
2. 接口需要带版本号`v1`
3. 接口需要有文档
4. 接口需要做认证
5. 接口需要无状态，不能依赖于会话

## 二、接口设计细则

1. **URL格式**：接口URL定义中，需要将接口请求的数据抽象为 **资源**，接口即是对资源的增加、删除、修改、查询

2. **资源名**：
     
     1. 中文名称的资源采用单数，英文名称的资源采用复数
     2. 不要在资源上动词描述，比如 **addUser**、**deleteUser**、**modifyUser**、**queryUser**
     3. 特殊情况需要制定行为的，在行为前面加上统一的actions关键字，例如/actions/import
     4. 两个词之间使用 `_ `作为连接符
     
3. **采用`http method`**

	1. **get** 方法代表读取，其请求是幂等的，不能修改资源的信息
	   如果超长的参数get请求，可采用post请求，并在header中加上x-http-method-override:get，controller层仍是以get来处理
	get请求不允许直接带请求体
	
	2. **delete**  方法代表删除资源，删除成功返回204，不反回数据，可带请求体
	
	3. **post**  方法代表创建资源，成功返回201，并返回该资源给调用方
	
	4. **put**  方法代表覆盖资源，成功返回204，无响应体返回，可带请求体
	
	5. **patch**  方法代表修改部分资源，更新成功返回204，我响应体返回，可带请求体，推荐使用patch，大部分场景更新只是更新部分数据
	
	注意：URL长度不要超过1024，浏览器会对URL长度进行限制

4. **版本信息**：放到URL中`/api/v1/资源名/{id}`

5. **统一前缀**

	接口都以`/api`开头，便于统一处理

6. 分页及排序
   	 
   1. URL中增加offset和limit参数用于分页
   
   2. URL中增加sort参数用于排序，默认正序，带-表示倒序
          在响应体中：包括
   
        ```json
        {
        	"offset": "",
        	"limit": "",
        	"data": "",
        	"total（非必传）": ""
        }
        ```
   
7. 请求头
     推荐采用`JWT token`

8. 请求体

  1. 文件上传采用`multipart/form-data`
  2.  其他均采用`application/json`格式，不得使用`application/x-www-form-urlencoded`

9. 响应状态码
    使用http的响应状态码

  ```json
  2xx
  	200 请求成功，响应体中带有资源的数据
  	201 资源创建成功
  	202 请求已接收。对于耗时较长的需要后台异步处理的，服务在接收请求后，返回202
  	204 响应中无内容，通常是在执行put post delete后，不返回资源的内容
  
  3xx
  	301 如果接口废弃，迁移到新接口中，可以返回301重定向
  	304 资源未修改。
  
  4xx
  	400 错误请求，参数格式不正确
  	401 未授权
  	403 请求被拒绝
  	404 资源不存在
  	410 如果接口永久废弃不用，可返回410.慎用
  	429 请求次数超限
  
  5xx
  	500 服务器内部错误
  
  ```

10. 响应体

  ```json
  {"message":""}
  ```


